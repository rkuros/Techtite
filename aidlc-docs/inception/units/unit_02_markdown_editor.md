# Unit 2: マークダウンエディタ

> **対応 Epic**: Epic 2 — マークダウンエディタ（コアエディタ）
> **対応ストーリー**: US-2.1〜US-2.7

---

## ユーザーストーリーと受け入れ基準

### US-2.1 [Must] Live Previewモード

個人開発者として、マークダウンファイルをLive Previewモードで編集したい。なぜなら、ソースコードを直接編集しながら、整形された表示を同時に確認したいからだ。

- [ ] カーソルがある行はMarkdownソースが表示される
- [ ] カーソルが離れた行はリッチな表示（レンダリング済み）に変換される
- [ ] 元のプレーンテキストが破壊されない（非破壊的レンダリング）
- [ ] ソースモードとLive Previewモードを切り替えられる

### US-2.2 [Must] 基本Markdown記法レンダリング

個人開発者として、見出し・リスト・太字・イタリック・コードブロック・引用・テーブル等の基本的なMarkdown記法が正しくレンダリングされてほしい。なぜなら、構造化されたドキュメントを快適に読み書きしたいからだ。

- [ ] 見出し（h1〜h6）がフォントサイズ・スタイルで区別して表示される
- [ ] 順序付き/順序なしリスト・チェックリストが正しくレンダリングされる
- [ ] 太字・イタリック・取り消し線・インラインコードが視覚的に反映される
- [ ] コードブロックがシンタックスハイライト付きで表示される
- [ ] 引用・テーブル・水平線が正しく表示される

### US-2.3 [Should] YAML Frontmatter GUI

個人開発者として、ファイルのYAML FrontmatterをGUIで視覚的に編集したい。なぜなら、YAMLの構文エラーを気にせずメタデータ（タイトル、タグ、日付等）を安全に管理したいからだ。

- [ ] YAML Frontmatterがエディタ上部にGUIフォームとして表示される
- [ ] 文字列、リスト、日付、チェックボックスの各データ型を視覚的に編集できる
- [ ] GUI編集の結果が正しいYAML形式でファイルに保存される
- [ ] YAML構文が壊れないことが保証される

### US-2.4 [Could] LaTeX数式レンダリング

個人開発者として、数式（LaTeX記法）がエディタ上でレンダリングされてほしい。なぜなら、技術ドキュメントで数式を使用することがあるからだ。

- [ ] インライン数式（`$...$`）がLive Previewで数式としてレンダリングされる
- [ ] ブロック数式（`$$...$$`）がLive Previewで数式としてレンダリングされる

### US-2.5 [Should] 画像埋め込みプレビュー

個人開発者として、画像をマークダウン内に埋め込み、エディタ上でプレビュー表示したい。なぜなら、スクリーンショットや図をドキュメントに含めて確認したいからだ。

- [ ] `![alt](path)` 記法の画像がLive Previewで表示される
- [ ] Vault内の相対パスの画像が正しく解決・表示される
- [ ] 画像が存在しない場合にエラー表示（プレースホルダ）が出る

### US-2.6 [Must] コードファイル閲覧（読み取り専用）

個人開発者として、コードファイル（.ts, .py, .rs等）をシンタックスハイライト付きで閲覧したい。なぜなら、AIエージェントが書いたコードの内容をレビューしたいからだ。

- [ ] コードファイルを開くとシンタックスハイライト付きで表示される
- [ ] 行番号が表示される
- [ ] 読み取り専用モードがデフォルトとなる（編集ロック表示付き）
- [ ] 必要に応じて編集モードに切り替えられる

### US-2.7 [Must] AIによるファイル読み書き

AIエージェントとして、マークダウンファイルおよびコードファイルの内容をプレーンテキストとして読み書きしたい。なぜなら、ドキュメント・コードの生成・編集をプログラム的に行うからだ。

- [ ] ファイルの内容をプレーンテキスト（UTF-8）として読み取れる
- [ ] プレーンテキストを書き込むとファイルとして正しく保存される
- [ ] ファイルの保存後、エディタの表示が自動的に更新される
